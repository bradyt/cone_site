<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Notes - cone</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/org-mode.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dart.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">cone</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">README</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">wiki <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Home/" class="dropdown-item">Home</a>
</li>
                                    
<li>
    <a href="../TODOs/" class="dropdown-item">TODOs</a>
</li>
                                    
<li>
    <a href="../SETUP/" class="dropdown-item">SETUP</a>
</li>
                                    
<li>
    <a href="../Graphs/" class="dropdown-item">Graphs</a>
</li>
                                    
<li>
    <a href="../Mobile-ledgers/" class="dropdown-item">Mobile ledgers</a>
</li>
                                    
<li>
    <a href="../Localizations/" class="dropdown-item">Localizations</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Notes</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Localizations/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/bradyt/cone_site/" class="nav-link"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#links" class="nav-link">Links</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#some-frequently-encountered-conventions-in-plain-text-accounting" class="nav-link">Some frequently encountered conventions in plain text accounting</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>These are partial and random notes. I've yet to establish a coherent
summary of what the topic will be, despite several attempts.</p>
<p>So for now, here you are.</p>
<h2 id="links">Links</h2>
<ul>
<li>ledger-cli Google Groups<ul>
<li><a href="https://groups.google.com/d/topic/ledger-cli/k0ZRUfBWvL4/discussion">Ledger and the accountancy equation</a></li>
<li><a href="https://groups.google.com/d/topic/ledger-cli/1F1prbDAn3s/discussion">Confusion about a few things</a></li>
<li><a href="https://groups.google.com/d/topic/ledger-cli/uvBjsHrwzAY/discussion">New option for Debit/Credit reports: --dc</a></li>
<li><a href="https://groups.google.com/forum/#!topic/ledger-cli/XCWNBpMtgp8/discussion">Re: new name for hledger-equity.hs ?</a></li>
</ul>
</li>
<li>hledger Google Groups<ul>
<li><a href="https://groups.google.com/forum/#!topic/hledger/TeBp1ymz1RA/discussion">new name for hledger-equity.hs ?</a></li>
</ul>
</li>
<li>money.stackexchange.com<ul>
<li><a href="https://money.stackexchange.com/questions/56484/what-is-the-equity-account-for-in-gnucash">What is the Equity account for in GnuCash</a></li>
<li><a href="https://money.stackexchange.com/questions/23994/in-double-entry-accounting-how-does-income-become-equity?noredirect=1&amp;lq=1">In double entry accounting, how does income become equity?</a></li>
</ul>
</li>
<li>beancount docs<ul>
<li><a href="https://xuhcc.github.io/beancount-docs/02_the_double_entry_counting_method.html#types-of-accounts">Types of Accounts</a></li>
<li><a href="https://xuhcc.github.io/beancount-docs/02_the_double_entry_counting_method.html#equity">Equity</a></li>
<li><a href="https://xuhcc.github.io/beancount-docs/02_the_double_entry_counting_method.html#chart-of-accounts">Chart of Accounts</a></li>
<li><a href="https://xuhcc.github.io/beancount-docs/02_the_double_entry_counting_method.html#credits-debits">Credits &amp; Debits</a></li>
</ul>
</li>
<li><a href="https://plaintextaccounting.org">Plain Text Accounting</a></li>
<li>ledger docs<ul>
<li><a href="https://www.ledger-cli.org/3.0/doc/ledger3.html#Stating-where-money-goes">Stating where money goes</a></li>
<li><a href="https://www.ledger-cli.org/3.0/doc/ledger3.html#Archiving-Previous-Years">Archiving Previous Years</a></li>
</ul>
</li>
<li>hledger docs<ul>
<li><a href="https://hledger.org/hledger.html#close">hledger#close</a></li>
<li><a href="https://hledger.org/accounting-links.html#theory">hledger accounting links</a><ul>
<li><a href="https://www.maa.org/press/maa-reviews/algebraic-models-for-accounting-systems">Rambaud et al., Algebraic Models for Accounting Systems</a></li>
<li><a href="http://www.ellerman.org/wp-content/uploads/2014/11/DEB-MathTreatment-reprint.pdf">Ellerman, On Double-Entry Bookkeeping: The Mathematical Treatment</a></li>
</ul>
</li>
</ul>
</li>
<li>GnuCash docs<ul>
<li><a href="https://www.gnucash.org/docs/v3/C/gnucash-guide/basics-accounting1.html#accounting_equation_static">static accounting equation</a></li>
<li><a href="https://www.gnucash.org/docs/v3/C/gnucash-guide/basics-accounting1.html#accounting_equation_dynamic">(dynamic) accounting equation</a></li>
<li><a href="https://www.gnucash.org/docs/v3/C/gnucash-guide/basics-accounting1.html#accounting_equation_rearranged">rearranged accounting equation</a></li>
</ul>
</li>
<li>Wikipedia<ul>
<li><a href="https://wikipedia.org/wiki/Accounting_equation">Accounting equation</a></li>
<li><a href="https://wikipedia.org/wiki/Retained_earnings">Retained earnings</a></li>
<li><a href="https://wikipedia.org/wiki/Debits_and_credits">Debits and Credits</a></li>
</ul>
</li>
</ul>
<h2 id="some-frequently-encountered-conventions-in-plain-text-accounting">Some frequently encountered conventions in plain text accounting</h2>
<h3 id="top-level-accounts">Top level accounts</h3>
<ul>
<li>assets</li>
<li>liabilities</li>
<li>equity</li>
<li>income</li>
<li>expenses</li>
</ul>
<h3 id="transactions-must-balance">Transactions must balance</h3>
<p>A typical transaction in ledger might be,</p>
<pre><code class="text">2000-01-01 an example transaction
  expenses:gas    10 USD
  assets:cash    -10 USD
</code></pre>

<p>Ledger convention is for transactions to balance, for example in the
previous, <code>10 + (-10) = 0</code>, so the postings balance. In fact, this is
enforced. If we try to write the following to our ledger file,</p>
<pre><code class="text">2000-01-01 an example transaction
  expenses:gas    10 USD
  assets:cash     -3 USD
</code></pre>

<p>Then ledger will emit the following error message,</p>
<pre><code class="text">​&gt; 2000-01-01 an example transaction
​&gt;   expenses:gas    10 USD
​&gt;   assets:cash     -3 USD
Unbalanced remainder is:
               7 USD
Amount to balance against:
              10 USD
Error: Transaction does not balance
</code></pre>

<h3 id="corollary-an-accounting-equation">Corollary, an accounting equation</h3>
<p>With the above top level accounts, and the fact that transactions must
balance, this implies the following equation will hold.</p>
<p>
<script type="math/tex; mode=display">
\text{assets} + \text{liabilities} + \text{equity} + \text{income} + \text{expenses} = 0.
</script>
</p>
<h3 id="signed-numbers-versus-debitcredit">Signed numbers versus debit/credit</h3>
<p>The notation chosen for plain text accounting uses signed numbers,
rather than requiring the notion of debits and credits.</p>
<p>I think we can borrow terminology from Ellerman, where they refer to
the two systems as SSS and DSU. That is, single-sided accounts with
signed numbers, versus double-sided accounts with unsigned numbers.</p>
<p>So if plain text accounting had used DSU, we might have written the
above transaction instead as,</p>
<pre><code class="text">2000-01-01 an example transaction
                 debits   credits
  expenses:gas   10 USD
  assets:cash              10 USD
</code></pre>

<p>We hope you agree that the SSS version is preferable, and natural to
use.</p>
<p>If you are trying to translate between an SSS amount or account, and
debit/credit terminology, a mnemonic might be as simple as "debit is
positive, credit is negative".</p>
<p>Note that we are implicitly flipping the sign on credit accounts, that
is, liabilities, equity and income will typically have negative
balances in plain text accounting.</p>
<p>Consider that GnuCash docs provide the DSU variant of our accounting
equation above, reproduced here.</p>
<p>
<script type="math/tex; mode=display">
\text{Assets} + \text{Expenses} = \text{Liabilities} + \text{Equity} + \text{Income}.
</script>
</p>
<h3 id="equity-and-net-income">Equity and net income</h3>
<p>There appears to be a discrepancy. Wikipedia writes the accounting
equation as,</p>
<p>
<script type="math/tex; mode=display">
\text{Assets} = \text{Liabilities} + \text{Equity}.
</script>
</p>
<p>So why do our accounting equations above have two extra terms, income
and expenses?</p>
<p>Wikipedia even writes the following equations,</p>
<p>
<script type="math/tex; mode=display">
\begin{align*}
\text{Owner's equity} &= \text{Contributed Capital} + \text{Retained Earnings}, \\
\text{Retained Earnings} &= \text{Net Income} − \text{Dividends, and} \\
\text{Net Income} &= \text{Income} − \text{Expenses}
\end{align*}
</script>
</p>
<p>This suggests that income and expenses should be subaccounts to
equity. So why do we have them as top-level accounts, or siblings to
the equity account?</p>
<p>Perhaps this quote from Wikpedia leads us to a possible viewpoint.</p>
<blockquote>
<p>At the end of that period, the net income (or net loss) at that
point is transferred from the Profit and Loss Account to the
retained earnings account.</p>
</blockquote>
<p>Rambaud et al. briefly share an example with this partition of
accounts, for equity accounts, permanent accounts, and temporary accounts.</p>
<p>
<script type="math/tex; mode=display">
A = A_e \cup A_p \cup A_t.
</script>
</p>
<p>Then further subdividing temporary accounts into revenue and expenses,</p>
<p>
<script type="math/tex; mode=display">
A = A_e \cup A_p \cup A_{tr} \cup A_{te}.
</script>
</p>
<p>They go on to suggest "that the temporary accounts are to be closed
and their balances combined and added to the retained earnings
account."</p>
<p>This notion that the top-level, current income and expense accounts
are "temporary", is repeated in a few more of the links above.</p>
<p>The equity is what we expect, every time we close the books.</p>
<p>This seems to solve the apparent discrepancy. Wikipedia's version of
accounting equation is true again, any time the top-level income and
expense accounts are zeroed out.</p>
<h3 id="zeroing-out-net-income">Zeroing out net income</h3>
<p>Let's see how we might do this in text accounting, with an example.</p>
<p>Suppose in January, you have the following transactions.</p>
<pre><code class="text">2000-01-01 paycheck
  assets:checking           10 USD
  income:employer          -10 USD

2000-01-01 rent
  expenses:rent              5 USD
  assets:checking           -5 USD
</code></pre>

<p>At the end of January, you might close the books by adding the
following transaction, to move profits and losses to retained
earnings.</p>
<pre><code class="text">2000-01-31 close 2000-01
  income:employer           10 USD
  expenses:rent             -5 USD
  equity:retained earnings  -5 USD
</code></pre>

<p>Now we can check our balances again.</p>
<pre><code class="text">&gt; ledger balance
               5 USD  assets:checking
              -5 USD  equity:retained earnings
--------------------
                   0
</code></pre>

<p>By closing the books, we have restored the usual accounting equation.
That is, for our SSS system in plain text accounting, the following
equation is true again.</p>
<p>
<script type="math/tex; mode=display">
\text{assets} + \text{liabilities} + \text{equity} = 0.
</script>
</p>
<h3 id="plain-text-accounting-closing">Plain text accounting closing</h3>
<p>It would be possible to generate the closing transaction above with
hledger's <code>close</code> command,</p>
<pre><code class="text">&gt; hledger close income expenses --closing | sed -e 's/closing balances/retained earnings/'
2000-01-31 retained earnings
  expenses:rent              -5 USD = 0 USD
  income:employer            10 USD = 0 USD
  equity:retained earnings   -5 USD
</code></pre>

<p>The examples I found do it a little differently, filtering on assets
and liabilities, and using this to close assets and liabilities in the
previous period's ledger file, and reopen just those accounts in the
next period's file.</p>
<pre><code class="text">&gt; hledger close assets liabilities
2000-01-31 closing balances
  assets:checking            -5 USD = 0 USD
  equity:closing balances     5 USD

2000-02-01 opening balances
  assets:checking             5 USD = 5 USD
  equity:opening balances    -5 USD
</code></pre>

<p>In some sense, this is implicitly closing net income and adding it to
equity.</p>
<p>To illustrate what we mean, let's consider another example.</p>
<pre><code class="text">2000-01-01 opening balance
  assets:checking          5 USD
  equity:opening balance  -5 USD

2000-01-15 paycheck
  assets:checking          7 USD
  income:employer         -7 USD
</code></pre>

<p>Then note our equity is now -5 USD, and our net income is -7 USD.</p>
<p>With the hledger approach, we have,</p>
<pre><code class="text">&gt; hledger close assets liabilities
2000-01-31 closing balances
    assets:checking                 -12 USD = 0 USD
    equity:closing balances          12 USD

2000-02-01 opening balances
    assets:checking                  12 USD = 12 USD
    equity:opening balances         -12 USD
</code></pre>

<p>So now we have the new equity equal to the old equity plus net income,
that is, -5 + (-7) = -12.</p>
<h3 id="a-proof">A proof</h3>
<p>Let's see if we can add notation, and state and prove a more precise
claim, corresponding with the claim made in the previous section.</p>
<p>Our example will be that of two files, one with an ongoing record of
transactions, and at end of period, we will add transactions to
facilitate recording the next period to the new file.</p>
<p>We consider three moments in time, or locations in the text ledger
files, really. The first is at the end of the previous period, but
before the closing transaction. The second moment we consider is after
the closing transaction for that period, but in that same file. The
third and final moment we consider, is after the opening transaction
for the next period, in the new file.</p>
<p>We denote the account balances for each moment with the following
notation, that is, assets, liabilities, equity, income, and expenses,
for each of the three moments, in order.</p>
<p>
<script type="math/tex; mode=display">
A, L, E, I, X,\\
A', L', E', I', X',\\
A'', L'', E'', I'', X''.
</script>
</p>
<p>We can now state our claim more precisely.</p>
<p>We claim that with the above scenario, and notation, that,</p>
<p>
<script type="math/tex; mode=display">
\begin{align*}
E'' &= E + I + X, \\
I'' &= 0, \\
X'' &= 0.
\end{align*}
</script>
</p>
<p>In other words, considering the two moments, before closing, and after
opening, we are in some sense, closing the net income and adding to
equity.</p>
<p>We don't need it for our proof, but perhaps for clarity, we provide
following to denote the closing transaction.</p>
<pre><code class="text">2000-01-31 closing
  A' = A - A = 0
  L' = L - L = 0
  E' = E + (A + L)
  I' = I
  X' = X
</code></pre>

<p>And the opening transaction we denote as,</p>
<pre><code class="text">2000-02-01 opening
  A'' = A
  L'' = L
  E'' = -(A + L)
  I'' = 0
  X'' = 0
</code></pre>

<p>We take as given that <script type="math/tex">A + L + E + I + X = 0</script>. Then since <script type="math/tex">A + L +
E'' = 0</script>, it quickly follows that,</p>
<p>
<script type="math/tex; mode=display">
\begin{align*}
E'' &= E + I + X, \\
I'' &= 0, \\
X'' &= 0,
\end{align*}
</script>
</p>
<p>as was claimed.</p>
<p>In other words, for hledger's prevailing close examples, in some
sense, net income was closed and added to equity.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
